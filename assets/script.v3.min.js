"use strict";function getBitwordsPosts(){var t="https://app.bitwords.io";var e=document.getElementById("bitwords-settings"),i=1==(Number(e.dataset.afterarticlesenabled)||1),s=Number(e.dataset.afterarticlesstoresinrow||3),n=e.dataset.publisherid,r=Number(e.dataset.afterarticlesmaxstories||6);if(i){fetch(t+"/api/v1/publishers/posts?count="+r,{headers:{"x-publisher":n,"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(e){document.getElementById("bitwords-container").style.display="block",document.getElementById("bitwords-generated-list").innerHTML=function(t){for(var e,i,n="",a=Math.min(t.length,r),o=0;o<a;o++){0!==o&&o%s!=0||(n+='<div class="bitwords-set">');var d=t[o]._id;n+='<a href="'+t[o].redirectUrl+'" class="bitwords-item" target="_blank" data-id="'+d+'">',n+='  <div class="bitwords-item-img">',n+='    <img class="bitwords-img" src="'+t[o].thumbnailUrl+'" alt="'+t[o].title+'">',n+="  </div>",n+='  <div class="bitwords-title">'+t[o].title+"</div>",n+='  <div class="bitwords-domain">'+(e=t[o].url,null!=(i=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i))&&i.length>2&&"string"==typeof i[2]&&i[2].length>0?i[2]:null)+"</div>",n+="</a>",o%s==s-1&&(n+="</div>")}return n+="</div>"}(e),document.querySelectorAll(".bitwords-item").forEach(function(e){var i=!1;function s(){var s=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,a=e.getElementsByClassName("bitwords-item-img")[0];if(s.top-r+a.clientHeight<0){i=!0;var o={method:"POST",headers:{"x-publisher":n,"Content-Type":"application/json"}};fetch(t+"/r/thumb/"+e.dataset.id+"/p/"+n,o)}}window.addEventListener("scroll",function(){i||requestAnimationFrame(s)})})})}}getBitwordsPosts();